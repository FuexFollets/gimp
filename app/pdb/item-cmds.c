/* LIGMA - The GNU Image Manipulation Program
 * Copyright (C) 1995-2003 Spencer Kimball and Peter Mattis
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

/* NOTE: This file is auto-generated by pdbgen.pl. */

#include "config.h"

#include "stamp-pdbgen.h"

#include <gegl.h>

#include <gdk-pixbuf/gdk-pixbuf.h>

#include "libligmabase/ligmabase.h"

#include "libligmabase/ligmabase.h"

#include "pdb-types.h"

#include "core/ligmaimage.h"
#include "core/ligmaitem.h"
#include "core/ligmalayermask.h"
#include "core/ligmalist.h"
#include "core/ligmaparamspecs.h"
#include "core/ligmaselection.h"
#include "text/ligmatextlayer.h"
#include "vectors/ligmavectors.h"

#include "ligmapdb.h"
#include "ligmapdb-utils.h"
#include "ligmapdbcontext.h"
#include "ligmaprocedure.h"
#include "internal-procs.h"

#include "ligma-intl.h"


static LigmaValueArray *
item_id_is_valid_invoker (LigmaProcedure         *procedure,
                          Ligma                  *ligma,
                          LigmaContext           *context,
                          LigmaProgress          *progress,
                          const LigmaValueArray  *args,
                          GError               **error)
{
  gboolean success = TRUE;
  LigmaValueArray *return_vals;
  gint item_id;
  gboolean valid = FALSE;

  item_id = g_value_get_int (ligma_value_array_index (args, 0));

  if (success)
    {
      LigmaItem *item = ligma_item_get_by_id (ligma, item_id);

      valid = (LIGMA_IS_ITEM (item) &&
               ! ligma_item_is_removed (LIGMA_ITEM (item)));
    }

  return_vals = ligma_procedure_get_return_values (procedure, success,
                                                  error ? *error : NULL);

  if (success)
    g_value_set_boolean (ligma_value_array_index (return_vals, 1), valid);

  return return_vals;
}

static LigmaValueArray *
item_id_is_drawable_invoker (LigmaProcedure         *procedure,
                             Ligma                  *ligma,
                             LigmaContext           *context,
                             LigmaProgress          *progress,
                             const LigmaValueArray  *args,
                             GError               **error)
{
  gboolean success = TRUE;
  LigmaValueArray *return_vals;
  gint item_id;
  gboolean drawable = FALSE;

  item_id = g_value_get_int (ligma_value_array_index (args, 0));

  if (success)
    {
      LigmaItem *item = ligma_item_get_by_id (ligma, item_id);

      drawable = (LIGMA_IS_DRAWABLE (item) &&
                  ! ligma_item_is_removed (item));
    }

  return_vals = ligma_procedure_get_return_values (procedure, success,
                                                  error ? *error : NULL);

  if (success)
    g_value_set_boolean (ligma_value_array_index (return_vals, 1), drawable);

  return return_vals;
}

static LigmaValueArray *
item_id_is_layer_invoker (LigmaProcedure         *procedure,
                          Ligma                  *ligma,
                          LigmaContext           *context,
                          LigmaProgress          *progress,
                          const LigmaValueArray  *args,
                          GError               **error)
{
  gboolean success = TRUE;
  LigmaValueArray *return_vals;
  gint item_id;
  gboolean layer = FALSE;

  item_id = g_value_get_int (ligma_value_array_index (args, 0));

  if (success)
    {
      LigmaItem *item = ligma_item_get_by_id (ligma, item_id);

      layer = (LIGMA_IS_LAYER (item) &&
               ! ligma_item_is_removed (item));
    }

  return_vals = ligma_procedure_get_return_values (procedure, success,
                                                  error ? *error : NULL);

  if (success)
    g_value_set_boolean (ligma_value_array_index (return_vals, 1), layer);

  return return_vals;
}

static LigmaValueArray *
item_id_is_text_layer_invoker (LigmaProcedure         *procedure,
                               Ligma                  *ligma,
                               LigmaContext           *context,
                               LigmaProgress          *progress,
                               const LigmaValueArray  *args,
                               GError               **error)
{
  gboolean success = TRUE;
  LigmaValueArray *return_vals;
  gint item_id;
  gboolean text_layer = FALSE;

  item_id = g_value_get_int (ligma_value_array_index (args, 0));

  if (success)
    {
      LigmaItem *item = ligma_item_get_by_id (ligma, item_id);

      text_layer = (LIGMA_IS_LAYER (item) &&
                    ! ligma_item_is_removed (item) &&
                    ligma_item_is_text_layer (item));
    }

  return_vals = ligma_procedure_get_return_values (procedure, success,
                                                  error ? *error : NULL);

  if (success)
    g_value_set_boolean (ligma_value_array_index (return_vals, 1), text_layer);

  return return_vals;
}

static LigmaValueArray *
item_id_is_channel_invoker (LigmaProcedure         *procedure,
                            Ligma                  *ligma,
                            LigmaContext           *context,
                            LigmaProgress          *progress,
                            const LigmaValueArray  *args,
                            GError               **error)
{
  gboolean success = TRUE;
  LigmaValueArray *return_vals;
  gint item_id;
  gboolean channel = FALSE;

  item_id = g_value_get_int (ligma_value_array_index (args, 0));

  if (success)
    {
      LigmaItem *item = ligma_item_get_by_id (ligma, item_id);

      channel = (LIGMA_IS_CHANNEL (item) &&
                 ! ligma_item_is_removed (item));
    }

  return_vals = ligma_procedure_get_return_values (procedure, success,
                                                  error ? *error : NULL);

  if (success)
    g_value_set_boolean (ligma_value_array_index (return_vals, 1), channel);

  return return_vals;
}

static LigmaValueArray *
item_id_is_layer_mask_invoker (LigmaProcedure         *procedure,
                               Ligma                  *ligma,
                               LigmaContext           *context,
                               LigmaProgress          *progress,
                               const LigmaValueArray  *args,
                               GError               **error)
{
  gboolean success = TRUE;
  LigmaValueArray *return_vals;
  gint item_id;
  gboolean layer_mask = FALSE;

  item_id = g_value_get_int (ligma_value_array_index (args, 0));

  if (success)
    {
      LigmaItem *item = ligma_item_get_by_id (ligma, item_id);

      layer_mask = (LIGMA_IS_LAYER_MASK (item) &&
                    ! ligma_item_is_removed (item));
    }

  return_vals = ligma_procedure_get_return_values (procedure, success,
                                                  error ? *error : NULL);

  if (success)
    g_value_set_boolean (ligma_value_array_index (return_vals, 1), layer_mask);

  return return_vals;
}

static LigmaValueArray *
item_id_is_selection_invoker (LigmaProcedure         *procedure,
                              Ligma                  *ligma,
                              LigmaContext           *context,
                              LigmaProgress          *progress,
                              const LigmaValueArray  *args,
                              GError               **error)
{
  gboolean success = TRUE;
  LigmaValueArray *return_vals;
  gint item_id;
  gboolean selection = FALSE;

  item_id = g_value_get_int (ligma_value_array_index (args, 0));

  if (success)
    {
      LigmaItem *item = ligma_item_get_by_id (ligma, item_id);

      selection = (LIGMA_IS_SELECTION (item) &&
                   ! ligma_item_is_removed (item));
    }

  return_vals = ligma_procedure_get_return_values (procedure, success,
                                                  error ? *error : NULL);

  if (success)
    g_value_set_boolean (ligma_value_array_index (return_vals, 1), selection);

  return return_vals;
}

static LigmaValueArray *
item_id_is_vectors_invoker (LigmaProcedure         *procedure,
                            Ligma                  *ligma,
                            LigmaContext           *context,
                            LigmaProgress          *progress,
                            const LigmaValueArray  *args,
                            GError               **error)
{
  gboolean success = TRUE;
  LigmaValueArray *return_vals;
  gint item_id;
  gboolean vectors = FALSE;

  item_id = g_value_get_int (ligma_value_array_index (args, 0));

  if (success)
    {
      LigmaItem *item = ligma_item_get_by_id (ligma, item_id);

      vectors = (LIGMA_IS_VECTORS (item) &&
                 ! ligma_item_is_removed (item));
    }

  return_vals = ligma_procedure_get_return_values (procedure, success,
                                                  error ? *error : NULL);

  if (success)
    g_value_set_boolean (ligma_value_array_index (return_vals, 1), vectors);

  return return_vals;
}

static LigmaValueArray *
item_get_image_invoker (LigmaProcedure         *procedure,
                        Ligma                  *ligma,
                        LigmaContext           *context,
                        LigmaProgress          *progress,
                        const LigmaValueArray  *args,
                        GError               **error)
{
  gboolean success = TRUE;
  LigmaValueArray *return_vals;
  LigmaItem *item;
  LigmaImage *image = NULL;

  item = g_value_get_object (ligma_value_array_index (args, 0));

  if (success)
    {
      image = ligma_item_get_image (LIGMA_ITEM (item));
    }

  return_vals = ligma_procedure_get_return_values (procedure, success,
                                                  error ? *error : NULL);

  if (success)
    g_value_set_object (ligma_value_array_index (return_vals, 1), image);

  return return_vals;
}

static LigmaValueArray *
item_delete_invoker (LigmaProcedure         *procedure,
                     Ligma                  *ligma,
                     LigmaContext           *context,
                     LigmaProgress          *progress,
                     const LigmaValueArray  *args,
                     GError               **error)
{
  gboolean success = TRUE;
  LigmaItem *item;

  item = g_value_get_object (ligma_value_array_index (args, 0));

  if (success)
    {
      if (g_object_is_floating (item))
        {
          g_object_ref_sink (item);
          g_object_unref (item);
        }
      else
        success = FALSE;
    }

  return ligma_procedure_get_return_values (procedure, success,
                                           error ? *error : NULL);
}

static LigmaValueArray *
item_is_group_invoker (LigmaProcedure         *procedure,
                       Ligma                  *ligma,
                       LigmaContext           *context,
                       LigmaProgress          *progress,
                       const LigmaValueArray  *args,
                       GError               **error)
{
  gboolean success = TRUE;
  LigmaValueArray *return_vals;
  LigmaItem *item;
  gboolean group = FALSE;

  item = g_value_get_object (ligma_value_array_index (args, 0));

  if (success)
    {
      group = (ligma_viewable_get_children (LIGMA_VIEWABLE (item)) != NULL);
    }

  return_vals = ligma_procedure_get_return_values (procedure, success,
                                                  error ? *error : NULL);

  if (success)
    g_value_set_boolean (ligma_value_array_index (return_vals, 1), group);

  return return_vals;
}

static LigmaValueArray *
item_get_parent_invoker (LigmaProcedure         *procedure,
                         Ligma                  *ligma,
                         LigmaContext           *context,
                         LigmaProgress          *progress,
                         const LigmaValueArray  *args,
                         GError               **error)
{
  gboolean success = TRUE;
  LigmaValueArray *return_vals;
  LigmaItem *item;
  LigmaItem *parent = NULL;

  item = g_value_get_object (ligma_value_array_index (args, 0));

  if (success)
    {
      parent = ligma_item_get_parent (item);
    }

  return_vals = ligma_procedure_get_return_values (procedure, success,
                                                  error ? *error : NULL);

  if (success)
    g_value_set_object (ligma_value_array_index (return_vals, 1), parent);

  return return_vals;
}

static LigmaValueArray *
item_get_children_invoker (LigmaProcedure         *procedure,
                           Ligma                  *ligma,
                           LigmaContext           *context,
                           LigmaProgress          *progress,
                           const LigmaValueArray  *args,
                           GError               **error)
{
  gboolean success = TRUE;
  LigmaValueArray *return_vals;
  LigmaItem *item;
  gint num_children = 0;
  LigmaItem **children = NULL;

  item = g_value_get_object (ligma_value_array_index (args, 0));

  if (success)
    {
      LigmaContainer *container = ligma_viewable_get_children (LIGMA_VIEWABLE (item));

      if (container)
        {
          num_children = ligma_container_get_n_children (container);

          if (num_children)
            {
              GList *list;
              gint   i;

              children = g_new (LigmaItem *, num_children);

              for (list = LIGMA_LIST (container)->queue->head, i = 0;
                   list;
                   list = g_list_next (list), i++)
                {
                  children[i] = g_object_ref (list->data);
                }
            }
        }
      else
        success = FALSE;

    }

  return_vals = ligma_procedure_get_return_values (procedure, success,
                                                  error ? *error : NULL);

  if (success)
    {
      g_value_set_int (ligma_value_array_index (return_vals, 1), num_children);
      ligma_value_take_object_array (ligma_value_array_index (return_vals, 2), LIGMA_TYPE_ITEM, (GObject **) children, num_children);
    }

  return return_vals;
}

static LigmaValueArray *
item_get_expanded_invoker (LigmaProcedure         *procedure,
                           Ligma                  *ligma,
                           LigmaContext           *context,
                           LigmaProgress          *progress,
                           const LigmaValueArray  *args,
                           GError               **error)
{
  gboolean success = TRUE;
  LigmaValueArray *return_vals;
  LigmaItem *item;
  gboolean expanded = FALSE;

  item = g_value_get_object (ligma_value_array_index (args, 0));

  if (success)
    {
      expanded = ligma_viewable_get_expanded (LIGMA_VIEWABLE (item));
    }

  return_vals = ligma_procedure_get_return_values (procedure, success,
                                                  error ? *error : NULL);

  if (success)
    g_value_set_boolean (ligma_value_array_index (return_vals, 1), expanded);

  return return_vals;
}

static LigmaValueArray *
item_set_expanded_invoker (LigmaProcedure         *procedure,
                           Ligma                  *ligma,
                           LigmaContext           *context,
                           LigmaProgress          *progress,
                           const LigmaValueArray  *args,
                           GError               **error)
{
  gboolean success = TRUE;
  LigmaItem *item;
  gboolean expanded;

  item = g_value_get_object (ligma_value_array_index (args, 0));
  expanded = g_value_get_boolean (ligma_value_array_index (args, 1));

  if (success)
    {
      ligma_viewable_set_expanded (LIGMA_VIEWABLE (item), expanded);
    }

  return ligma_procedure_get_return_values (procedure, success,
                                           error ? *error : NULL);
}

static LigmaValueArray *
item_get_name_invoker (LigmaProcedure         *procedure,
                       Ligma                  *ligma,
                       LigmaContext           *context,
                       LigmaProgress          *progress,
                       const LigmaValueArray  *args,
                       GError               **error)
{
  gboolean success = TRUE;
  LigmaValueArray *return_vals;
  LigmaItem *item;
  gchar *name = NULL;

  item = g_value_get_object (ligma_value_array_index (args, 0));

  if (success)
    {
      name = g_strdup (ligma_object_get_name (item));
    }

  return_vals = ligma_procedure_get_return_values (procedure, success,
                                                  error ? *error : NULL);

  if (success)
    g_value_take_string (ligma_value_array_index (return_vals, 1), name);

  return return_vals;
}

static LigmaValueArray *
item_set_name_invoker (LigmaProcedure         *procedure,
                       Ligma                  *ligma,
                       LigmaContext           *context,
                       LigmaProgress          *progress,
                       const LigmaValueArray  *args,
                       GError               **error)
{
  gboolean success = TRUE;
  LigmaItem *item;
  const gchar *name;

  item = g_value_get_object (ligma_value_array_index (args, 0));
  name = g_value_get_string (ligma_value_array_index (args, 1));

  if (success)
    {
      success = ligma_item_rename (LIGMA_ITEM (item), name, error);
    }

  return ligma_procedure_get_return_values (procedure, success,
                                           error ? *error : NULL);
}

static LigmaValueArray *
item_get_visible_invoker (LigmaProcedure         *procedure,
                          Ligma                  *ligma,
                          LigmaContext           *context,
                          LigmaProgress          *progress,
                          const LigmaValueArray  *args,
                          GError               **error)
{
  gboolean success = TRUE;
  LigmaValueArray *return_vals;
  LigmaItem *item;
  gboolean visible = FALSE;

  item = g_value_get_object (ligma_value_array_index (args, 0));

  if (success)
    {
      visible = ligma_item_get_visible (LIGMA_ITEM (item));
    }

  return_vals = ligma_procedure_get_return_values (procedure, success,
                                                  error ? *error : NULL);

  if (success)
    g_value_set_boolean (ligma_value_array_index (return_vals, 1), visible);

  return return_vals;
}

static LigmaValueArray *
item_set_visible_invoker (LigmaProcedure         *procedure,
                          Ligma                  *ligma,
                          LigmaContext           *context,
                          LigmaProgress          *progress,
                          const LigmaValueArray  *args,
                          GError               **error)
{
  gboolean success = TRUE;
  LigmaItem *item;
  gboolean visible;

  item = g_value_get_object (ligma_value_array_index (args, 0));
  visible = g_value_get_boolean (ligma_value_array_index (args, 1));

  if (success)
    {
      ligma_item_set_visible (LIGMA_ITEM (item), visible, TRUE);
    }

  return ligma_procedure_get_return_values (procedure, success,
                                           error ? *error : NULL);
}

static LigmaValueArray *
item_get_lock_content_invoker (LigmaProcedure         *procedure,
                               Ligma                  *ligma,
                               LigmaContext           *context,
                               LigmaProgress          *progress,
                               const LigmaValueArray  *args,
                               GError               **error)
{
  gboolean success = TRUE;
  LigmaValueArray *return_vals;
  LigmaItem *item;
  gboolean lock_content = FALSE;

  item = g_value_get_object (ligma_value_array_index (args, 0));

  if (success)
    {
      lock_content = ligma_item_get_lock_content (LIGMA_ITEM (item));
    }

  return_vals = ligma_procedure_get_return_values (procedure, success,
                                                  error ? *error : NULL);

  if (success)
    g_value_set_boolean (ligma_value_array_index (return_vals, 1), lock_content);

  return return_vals;
}

static LigmaValueArray *
item_set_lock_content_invoker (LigmaProcedure         *procedure,
                               Ligma                  *ligma,
                               LigmaContext           *context,
                               LigmaProgress          *progress,
                               const LigmaValueArray  *args,
                               GError               **error)
{
  gboolean success = TRUE;
  LigmaItem *item;
  gboolean lock_content;

  item = g_value_get_object (ligma_value_array_index (args, 0));
  lock_content = g_value_get_boolean (ligma_value_array_index (args, 1));

  if (success)
    {
      if (ligma_item_can_lock_content (LIGMA_ITEM (item)))
        ligma_item_set_lock_content (LIGMA_ITEM (item), lock_content, TRUE);
      else
        success = FALSE;
    }

  return ligma_procedure_get_return_values (procedure, success,
                                           error ? *error : NULL);
}

static LigmaValueArray *
item_get_lock_position_invoker (LigmaProcedure         *procedure,
                                Ligma                  *ligma,
                                LigmaContext           *context,
                                LigmaProgress          *progress,
                                const LigmaValueArray  *args,
                                GError               **error)
{
  gboolean success = TRUE;
  LigmaValueArray *return_vals;
  LigmaItem *item;
  gboolean lock_position = FALSE;

  item = g_value_get_object (ligma_value_array_index (args, 0));

  if (success)
    {
      lock_position = ligma_item_get_lock_position (LIGMA_ITEM (item));
    }

  return_vals = ligma_procedure_get_return_values (procedure, success,
                                                  error ? *error : NULL);

  if (success)
    g_value_set_boolean (ligma_value_array_index (return_vals, 1), lock_position);

  return return_vals;
}

static LigmaValueArray *
item_set_lock_position_invoker (LigmaProcedure         *procedure,
                                Ligma                  *ligma,
                                LigmaContext           *context,
                                LigmaProgress          *progress,
                                const LigmaValueArray  *args,
                                GError               **error)
{
  gboolean success = TRUE;
  LigmaItem *item;
  gboolean lock_position;

  item = g_value_get_object (ligma_value_array_index (args, 0));
  lock_position = g_value_get_boolean (ligma_value_array_index (args, 1));

  if (success)
    {
      if (ligma_item_can_lock_position (LIGMA_ITEM (item)))
        ligma_item_set_lock_position (LIGMA_ITEM (item), lock_position, TRUE);
      else
        success = FALSE;
    }

  return ligma_procedure_get_return_values (procedure, success,
                                           error ? *error : NULL);
}

static LigmaValueArray *
item_get_lock_visibility_invoker (LigmaProcedure         *procedure,
                                  Ligma                  *ligma,
                                  LigmaContext           *context,
                                  LigmaProgress          *progress,
                                  const LigmaValueArray  *args,
                                  GError               **error)
{
  gboolean success = TRUE;
  LigmaValueArray *return_vals;
  LigmaItem *item;
  gboolean lock_visibility = FALSE;

  item = g_value_get_object (ligma_value_array_index (args, 0));

  if (success)
    {
      lock_visibility = ligma_item_get_lock_visibility (LIGMA_ITEM (item));
    }

  return_vals = ligma_procedure_get_return_values (procedure, success,
                                                  error ? *error : NULL);

  if (success)
    g_value_set_boolean (ligma_value_array_index (return_vals, 1), lock_visibility);

  return return_vals;
}

static LigmaValueArray *
item_set_lock_visibility_invoker (LigmaProcedure         *procedure,
                                  Ligma                  *ligma,
                                  LigmaContext           *context,
                                  LigmaProgress          *progress,
                                  const LigmaValueArray  *args,
                                  GError               **error)
{
  gboolean success = TRUE;
  LigmaItem *item;
  gboolean lock_visibility;

  item = g_value_get_object (ligma_value_array_index (args, 0));
  lock_visibility = g_value_get_boolean (ligma_value_array_index (args, 1));

  if (success)
    {
      if (ligma_item_can_lock_visibility (LIGMA_ITEM (item)))
        ligma_item_set_lock_visibility (LIGMA_ITEM (item), lock_visibility, TRUE);
      else
        success = FALSE;
    }

  return ligma_procedure_get_return_values (procedure, success,
                                           error ? *error : NULL);
}

static LigmaValueArray *
item_get_color_tag_invoker (LigmaProcedure         *procedure,
                            Ligma                  *ligma,
                            LigmaContext           *context,
                            LigmaProgress          *progress,
                            const LigmaValueArray  *args,
                            GError               **error)
{
  gboolean success = TRUE;
  LigmaValueArray *return_vals;
  LigmaItem *item;
  gint color_tag = 0;

  item = g_value_get_object (ligma_value_array_index (args, 0));

  if (success)
    {
      color_tag = ligma_item_get_color_tag (LIGMA_ITEM (item));
    }

  return_vals = ligma_procedure_get_return_values (procedure, success,
                                                  error ? *error : NULL);

  if (success)
    g_value_set_enum (ligma_value_array_index (return_vals, 1), color_tag);

  return return_vals;
}

static LigmaValueArray *
item_set_color_tag_invoker (LigmaProcedure         *procedure,
                            Ligma                  *ligma,
                            LigmaContext           *context,
                            LigmaProgress          *progress,
                            const LigmaValueArray  *args,
                            GError               **error)
{
  gboolean success = TRUE;
  LigmaItem *item;
  gint color_tag;

  item = g_value_get_object (ligma_value_array_index (args, 0));
  color_tag = g_value_get_enum (ligma_value_array_index (args, 1));

  if (success)
    {
      ligma_item_set_color_tag (LIGMA_ITEM (item), color_tag, TRUE);
    }

  return ligma_procedure_get_return_values (procedure, success,
                                           error ? *error : NULL);
}

static LigmaValueArray *
item_get_tattoo_invoker (LigmaProcedure         *procedure,
                         Ligma                  *ligma,
                         LigmaContext           *context,
                         LigmaProgress          *progress,
                         const LigmaValueArray  *args,
                         GError               **error)
{
  gboolean success = TRUE;
  LigmaValueArray *return_vals;
  LigmaItem *item;
  guint tattoo = 0;

  item = g_value_get_object (ligma_value_array_index (args, 0));

  if (success)
    {
      tattoo = ligma_item_get_tattoo (LIGMA_ITEM (item));
    }

  return_vals = ligma_procedure_get_return_values (procedure, success,
                                                  error ? *error : NULL);

  if (success)
    g_value_set_uint (ligma_value_array_index (return_vals, 1), tattoo);

  return return_vals;
}

static LigmaValueArray *
item_set_tattoo_invoker (LigmaProcedure         *procedure,
                         Ligma                  *ligma,
                         LigmaContext           *context,
                         LigmaProgress          *progress,
                         const LigmaValueArray  *args,
                         GError               **error)
{
  gboolean success = TRUE;
  LigmaItem *item;
  guint tattoo;

  item = g_value_get_object (ligma_value_array_index (args, 0));
  tattoo = g_value_get_uint (ligma_value_array_index (args, 1));

  if (success)
    {
      ligma_item_set_tattoo (LIGMA_ITEM (item), tattoo);
    }

  return ligma_procedure_get_return_values (procedure, success,
                                           error ? *error : NULL);
}

static LigmaValueArray *
item_attach_parasite_invoker (LigmaProcedure         *procedure,
                              Ligma                  *ligma,
                              LigmaContext           *context,
                              LigmaProgress          *progress,
                              const LigmaValueArray  *args,
                              GError               **error)
{
  gboolean success = TRUE;
  LigmaItem *item;
  const LigmaParasite *parasite;

  item = g_value_get_object (ligma_value_array_index (args, 0));
  parasite = g_value_get_boxed (ligma_value_array_index (args, 1));

  if (success)
    {
      if (ligma_item_parasite_validate (item, parasite, error))
        ligma_item_parasite_attach (item, parasite, TRUE);
      else
        success = FALSE;
    }

  return ligma_procedure_get_return_values (procedure, success,
                                           error ? *error : NULL);
}

static LigmaValueArray *
item_detach_parasite_invoker (LigmaProcedure         *procedure,
                              Ligma                  *ligma,
                              LigmaContext           *context,
                              LigmaProgress          *progress,
                              const LigmaValueArray  *args,
                              GError               **error)
{
  gboolean success = TRUE;
  LigmaItem *item;
  const gchar *name;

  item = g_value_get_object (ligma_value_array_index (args, 0));
  name = g_value_get_string (ligma_value_array_index (args, 1));

  if (success)
    {
      ligma_item_parasite_detach (item, name, TRUE);
    }

  return ligma_procedure_get_return_values (procedure, success,
                                           error ? *error : NULL);
}

static LigmaValueArray *
item_get_parasite_invoker (LigmaProcedure         *procedure,
                           Ligma                  *ligma,
                           LigmaContext           *context,
                           LigmaProgress          *progress,
                           const LigmaValueArray  *args,
                           GError               **error)
{
  gboolean success = TRUE;
  LigmaValueArray *return_vals;
  LigmaItem *item;
  const gchar *name;
  LigmaParasite *parasite = NULL;

  item = g_value_get_object (ligma_value_array_index (args, 0));
  name = g_value_get_string (ligma_value_array_index (args, 1));

  if (success)
    {
      parasite = ligma_parasite_copy (ligma_item_parasite_find (item, name));

      if (! parasite)
        success = FALSE;
    }

  return_vals = ligma_procedure_get_return_values (procedure, success,
                                                  error ? *error : NULL);

  if (success)
    g_value_take_boxed (ligma_value_array_index (return_vals, 1), parasite);

  return return_vals;
}

static LigmaValueArray *
item_get_parasite_list_invoker (LigmaProcedure         *procedure,
                                Ligma                  *ligma,
                                LigmaContext           *context,
                                LigmaProgress          *progress,
                                const LigmaValueArray  *args,
                                GError               **error)
{
  gboolean success = TRUE;
  LigmaValueArray *return_vals;
  LigmaItem *item;
  gchar **parasites = NULL;

  item = g_value_get_object (ligma_value_array_index (args, 0));

  if (success)
    {
      parasites = ligma_item_parasite_list (item);
    }

  return_vals = ligma_procedure_get_return_values (procedure, success,
                                                  error ? *error : NULL);

  if (success)
    g_value_take_boxed (ligma_value_array_index (return_vals, 1), parasites);

  return return_vals;
}

void
register_item_procs (LigmaPDB *pdb)
{
  LigmaProcedure *procedure;

  /*
   * ligma-item-id-is-valid
   */
  procedure = ligma_procedure_new (item_id_is_valid_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-id-is-valid");
  ligma_procedure_set_static_help (procedure,
                                  "Returns TRUE if the item ID is valid.",
                                  "This procedure checks if the given item ID is valid and refers to an existing item.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Sven Neumann <sven@ligma.org>",
                                         "Sven Neumann",
                                         "2007");
  ligma_procedure_add_argument (procedure,
                               g_param_spec_int ("item-id",
                                                 "item id",
                                                 "The item ID to check",
                                                 G_MININT32, G_MAXINT32, 0,
                                                 LIGMA_PARAM_READWRITE));
  ligma_procedure_add_return_value (procedure,
                                   g_param_spec_boolean ("valid",
                                                         "valid",
                                                         "Whether the item ID is valid",
                                                         FALSE,
                                                         LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-id-is-drawable
   */
  procedure = ligma_procedure_new (item_id_is_drawable_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-id-is-drawable");
  ligma_procedure_set_static_help (procedure,
                                  "Returns whether the item ID is a drawable.",
                                  "This procedure returns TRUE if the specified item ID is a drawable.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Spencer Kimball & Peter Mattis",
                                         "Spencer Kimball & Peter Mattis",
                                         "1995-1996");
  ligma_procedure_add_argument (procedure,
                               g_param_spec_int ("item-id",
                                                 "item id",
                                                 "The item ID",
                                                 G_MININT32, G_MAXINT32, 0,
                                                 LIGMA_PARAM_READWRITE));
  ligma_procedure_add_return_value (procedure,
                                   g_param_spec_boolean ("drawable",
                                                         "drawable",
                                                         "TRUE if the item ID is a drawable, FALSE otherwise",
                                                         FALSE,
                                                         LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-id-is-layer
   */
  procedure = ligma_procedure_new (item_id_is_layer_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-id-is-layer");
  ligma_procedure_set_static_help (procedure,
                                  "Returns whether the item ID is a layer.",
                                  "This procedure returns TRUE if the specified item ID is a layer.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Spencer Kimball & Peter Mattis",
                                         "Spencer Kimball & Peter Mattis",
                                         "1995-1996");
  ligma_procedure_add_argument (procedure,
                               g_param_spec_int ("item-id",
                                                 "item id",
                                                 "The item ID",
                                                 G_MININT32, G_MAXINT32, 0,
                                                 LIGMA_PARAM_READWRITE));
  ligma_procedure_add_return_value (procedure,
                                   g_param_spec_boolean ("layer",
                                                         "layer",
                                                         "TRUE if the item is a layer, FALSE otherwise",
                                                         FALSE,
                                                         LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-id-is-text-layer
   */
  procedure = ligma_procedure_new (item_id_is_text_layer_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-id-is-text-layer");
  ligma_procedure_set_static_help (procedure,
                                  "Returns whether the item ID is a text layer.",
                                  "This procedure returns TRUE if the specified item ID is a text layer.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Michael Natterer <mitch@ligma.org>",
                                         "Michael Natterer",
                                         "2010");
  ligma_procedure_add_argument (procedure,
                               g_param_spec_int ("item-id",
                                                 "item id",
                                                 "The item ID",
                                                 G_MININT32, G_MAXINT32, 0,
                                                 LIGMA_PARAM_READWRITE));
  ligma_procedure_add_return_value (procedure,
                                   g_param_spec_boolean ("text-layer",
                                                         "text layer",
                                                         "TRUE if the item is a text layer, FALSE otherwise.",
                                                         FALSE,
                                                         LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-id-is-channel
   */
  procedure = ligma_procedure_new (item_id_is_channel_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-id-is-channel");
  ligma_procedure_set_static_help (procedure,
                                  "Returns whether the item ID is a channel.",
                                  "This procedure returns TRUE if the specified item ID is a channel.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Spencer Kimball & Peter Mattis",
                                         "Spencer Kimball & Peter Mattis",
                                         "1995-1996");
  ligma_procedure_add_argument (procedure,
                               g_param_spec_int ("item-id",
                                                 "item id",
                                                 "The item ID",
                                                 G_MININT32, G_MAXINT32, 0,
                                                 LIGMA_PARAM_READWRITE));
  ligma_procedure_add_return_value (procedure,
                                   g_param_spec_boolean ("channel",
                                                         "channel",
                                                         "TRUE if the item ID is a channel, FALSE otherwise",
                                                         FALSE,
                                                         LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-id-is-layer-mask
   */
  procedure = ligma_procedure_new (item_id_is_layer_mask_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-id-is-layer-mask");
  ligma_procedure_set_static_help (procedure,
                                  "Returns whether the item ID is a layer mask.",
                                  "This procedure returns TRUE if the specified item ID is a layer mask.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Spencer Kimball & Peter Mattis",
                                         "Spencer Kimball & Peter Mattis",
                                         "1995-1996");
  ligma_procedure_add_argument (procedure,
                               g_param_spec_int ("item-id",
                                                 "item id",
                                                 "The item",
                                                 G_MININT32, G_MAXINT32, 0,
                                                 LIGMA_PARAM_READWRITE));
  ligma_procedure_add_return_value (procedure,
                                   g_param_spec_boolean ("layer-mask",
                                                         "layer mask",
                                                         "TRUE if the item ID is a layer mask, FALSE otherwise",
                                                         FALSE,
                                                         LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-id-is-selection
   */
  procedure = ligma_procedure_new (item_id_is_selection_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-id-is-selection");
  ligma_procedure_set_static_help (procedure,
                                  "Returns whether the item ID is a selection.",
                                  "This procedure returns TRUE if the specified item ID is a selection.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Spencer Kimball & Peter Mattis",
                                         "Spencer Kimball & Peter Mattis",
                                         "1995-1996");
  ligma_procedure_add_argument (procedure,
                               g_param_spec_int ("item-id",
                                                 "item id",
                                                 "The item ID",
                                                 G_MININT32, G_MAXINT32, 0,
                                                 LIGMA_PARAM_READWRITE));
  ligma_procedure_add_return_value (procedure,
                                   g_param_spec_boolean ("selection",
                                                         "selection",
                                                         "TRUE if the item ID is a selection, FALSE otherwise",
                                                         FALSE,
                                                         LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-id-is-vectors
   */
  procedure = ligma_procedure_new (item_id_is_vectors_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-id-is-vectors");
  ligma_procedure_set_static_help (procedure,
                                  "Returns whether the item ID is a vectors.",
                                  "This procedure returns TRUE if the specified item ID is a vectors.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Spencer Kimball & Peter Mattis",
                                         "Spencer Kimball & Peter Mattis",
                                         "1995-1996");
  ligma_procedure_add_argument (procedure,
                               g_param_spec_int ("item-id",
                                                 "item id",
                                                 "The item ID",
                                                 G_MININT32, G_MAXINT32, 0,
                                                 LIGMA_PARAM_READWRITE));
  ligma_procedure_add_return_value (procedure,
                                   g_param_spec_boolean ("vectors",
                                                         "vectors",
                                                         "TRUE if the item ID is a vectors, FALSE otherwise",
                                                         FALSE,
                                                         LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-get-image
   */
  procedure = ligma_procedure_new (item_get_image_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-get-image");
  ligma_procedure_set_static_help (procedure,
                                  "Returns the item's image.",
                                  "This procedure returns the item's image.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Spencer Kimball & Peter Mattis",
                                         "Spencer Kimball & Peter Mattis",
                                         "1995-1996");
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_item ("item",
                                                     "item",
                                                     "The item",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_procedure_add_return_value (procedure,
                                   ligma_param_spec_image ("image",
                                                          "image",
                                                          "The item's image",
                                                          FALSE,
                                                          LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-delete
   */
  procedure = ligma_procedure_new (item_delete_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-delete");
  ligma_procedure_set_static_help (procedure,
                                  "Delete a item.",
                                  "This procedure deletes the specified item. This must not be done if the image containing this item was already deleted or if the item was already removed from the image. The only case in which this procedure is useful is if you want to get rid of a item which has not yet been added to an image.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Spencer Kimball & Peter Mattis",
                                         "Spencer Kimball & Peter Mattis",
                                         "1995-1996");
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_item ("item",
                                                     "item",
                                                     "The item to delete",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-is-group
   */
  procedure = ligma_procedure_new (item_is_group_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-is-group");
  ligma_procedure_set_static_help (procedure,
                                  "Returns whether the item is a group item.",
                                  "This procedure returns TRUE if the specified item is a group item which can have children.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Michael Natterer <mitch@ligma.org>",
                                         "Michael Natterer",
                                         "2010");
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_item ("item",
                                                     "item",
                                                     "The item",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_procedure_add_return_value (procedure,
                                   g_param_spec_boolean ("group",
                                                         "group",
                                                         "TRUE if the item is a group, FALSE otherwise",
                                                         FALSE,
                                                         LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-get-parent
   */
  procedure = ligma_procedure_new (item_get_parent_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-get-parent");
  ligma_procedure_set_static_help (procedure,
                                  "Returns the item's parent item.",
                                  "This procedure returns the item's parent item, if any.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Michael Natterer <mitch@ligma.org>",
                                         "Michael Natterer",
                                         "2010");
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_item ("item",
                                                     "item",
                                                     "The item",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_procedure_add_return_value (procedure,
                                   ligma_param_spec_item ("parent",
                                                         "parent",
                                                         "The item's parent item",
                                                         FALSE,
                                                         LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-get-children
   */
  procedure = ligma_procedure_new (item_get_children_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-get-children");
  ligma_procedure_set_static_help (procedure,
                                  "Returns the item's list of children.",
                                  "This procedure returns the list of items which are children of the specified item. The order is topmost to bottommost.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Michael Natterer <mitch@ligma.org>",
                                         "Michael Natterer",
                                         "2010");
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_item ("item",
                                                     "item",
                                                     "The item",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_procedure_add_return_value (procedure,
                                   g_param_spec_int ("num-children",
                                                     "num children",
                                                     "The item's number of children",
                                                     0, G_MAXINT32, 0,
                                                     LIGMA_PARAM_READWRITE));
  ligma_procedure_add_return_value (procedure,
                                   ligma_param_spec_object_array ("children",
                                                                 "children",
                                                                 "The item's list of children",
                                                                 LIGMA_TYPE_ITEM,
                                                                 LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-get-expanded
   */
  procedure = ligma_procedure_new (item_get_expanded_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-get-expanded");
  ligma_procedure_set_static_help (procedure,
                                  "Returns whether the item is expanded.",
                                  "This procedure returns TRUE if the specified item is expanded.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Ell",
                                         "Ell",
                                         "2017");
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_item ("item",
                                                     "item",
                                                     "The item",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_procedure_add_return_value (procedure,
                                   g_param_spec_boolean ("expanded",
                                                         "expanded",
                                                         "TRUE if the item is expanded, FALSE otherwise",
                                                         FALSE,
                                                         LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-set-expanded
   */
  procedure = ligma_procedure_new (item_set_expanded_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-set-expanded");
  ligma_procedure_set_static_help (procedure,
                                  "Sets the expanded state of the item.",
                                  "This procedure expands or collapses the item.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Ell",
                                         "Ell",
                                         "2017");
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_item ("item",
                                                     "item",
                                                     "The item",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_procedure_add_argument (procedure,
                               g_param_spec_boolean ("expanded",
                                                     "expanded",
                                                     "TRUE to expand the item, FALSE to collapse the item",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-get-name
   */
  procedure = ligma_procedure_new (item_get_name_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-get-name");
  ligma_procedure_set_static_help (procedure,
                                  "Get the name of the specified item.",
                                  "This procedure returns the specified item's name.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Spencer Kimball & Peter Mattis",
                                         "Spencer Kimball & Peter Mattis",
                                         "1995-1996");
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_item ("item",
                                                     "item",
                                                     "The item",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_procedure_add_return_value (procedure,
                                   ligma_param_spec_string ("name",
                                                           "name",
                                                           "The item name",
                                                           FALSE, FALSE, FALSE,
                                                           NULL,
                                                           LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-set-name
   */
  procedure = ligma_procedure_new (item_set_name_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-set-name");
  ligma_procedure_set_static_help (procedure,
                                  "Set the name of the specified item.",
                                  "This procedure sets the specified item's name.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Spencer Kimball & Peter Mattis",
                                         "Spencer Kimball & Peter Mattis",
                                         "1995-1996");
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_item ("item",
                                                     "item",
                                                     "The item",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_string ("name",
                                                       "name",
                                                       "The new item name",
                                                       FALSE, FALSE, FALSE,
                                                       NULL,
                                                       LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-get-visible
   */
  procedure = ligma_procedure_new (item_get_visible_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-get-visible");
  ligma_procedure_set_static_help (procedure,
                                  "Get the visibility of the specified item.",
                                  "This procedure returns the specified item's visibility.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Spencer Kimball & Peter Mattis",
                                         "Spencer Kimball & Peter Mattis",
                                         "1995-1996");
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_item ("item",
                                                     "item",
                                                     "The item",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_procedure_add_return_value (procedure,
                                   g_param_spec_boolean ("visible",
                                                         "visible",
                                                         "The item visibility",
                                                         FALSE,
                                                         LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-set-visible
   */
  procedure = ligma_procedure_new (item_set_visible_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-set-visible");
  ligma_procedure_set_static_help (procedure,
                                  "Set the visibility of the specified item.",
                                  "This procedure sets the specified item's visibility.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Spencer Kimball & Peter Mattis",
                                         "Spencer Kimball & Peter Mattis",
                                         "1995-1996");
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_item ("item",
                                                     "item",
                                                     "The item",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_procedure_add_argument (procedure,
                               g_param_spec_boolean ("visible",
                                                     "visible",
                                                     "The new item visibility",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-get-lock-content
   */
  procedure = ligma_procedure_new (item_get_lock_content_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-get-lock-content");
  ligma_procedure_set_static_help (procedure,
                                  "Get the 'lock content' state of the specified item.",
                                  "This procedure returns the specified item's lock content state.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Michael Natterer <mitch@ligma.org>",
                                         "Michael Natterer",
                                         "2009");
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_item ("item",
                                                     "item",
                                                     "The item",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_procedure_add_return_value (procedure,
                                   g_param_spec_boolean ("lock-content",
                                                         "lock content",
                                                         "Whether the item's contents are locked",
                                                         FALSE,
                                                         LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-set-lock-content
   */
  procedure = ligma_procedure_new (item_set_lock_content_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-set-lock-content");
  ligma_procedure_set_static_help (procedure,
                                  "Set the 'lock content' state of the specified item.",
                                  "This procedure sets the specified item's lock content state.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Michael Natterer <mitch@ligma.org>",
                                         "Michael Natterer",
                                         "2009");
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_item ("item",
                                                     "item",
                                                     "The item",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_procedure_add_argument (procedure,
                               g_param_spec_boolean ("lock-content",
                                                     "lock content",
                                                     "The new item 'lock content' state",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-get-lock-position
   */
  procedure = ligma_procedure_new (item_get_lock_position_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-get-lock-position");
  ligma_procedure_set_static_help (procedure,
                                  "Get the 'lock position' state of the specified item.",
                                  "This procedure returns the specified item's lock position state.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Michael Natterer <mitch@ligma.org>",
                                         "Michael Natterer",
                                         "2012");
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_item ("item",
                                                     "item",
                                                     "The item",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_procedure_add_return_value (procedure,
                                   g_param_spec_boolean ("lock-position",
                                                         "lock position",
                                                         "Whether the item's position is locked",
                                                         FALSE,
                                                         LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-set-lock-position
   */
  procedure = ligma_procedure_new (item_set_lock_position_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-set-lock-position");
  ligma_procedure_set_static_help (procedure,
                                  "Set the 'lock position' state of the specified item.",
                                  "This procedure sets the specified item's lock position state.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Michael Natterer <mitch@ligma.org>",
                                         "Michael Natterer",
                                         "2009");
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_item ("item",
                                                     "item",
                                                     "The item",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_procedure_add_argument (procedure,
                               g_param_spec_boolean ("lock-position",
                                                     "lock position",
                                                     "The new item 'lock position' state",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-get-lock-visibility
   */
  procedure = ligma_procedure_new (item_get_lock_visibility_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-get-lock-visibility");
  ligma_procedure_set_static_help (procedure,
                                  "Get the 'lock visibility' state of the specified item.",
                                  "This procedure returns the specified item's lock visibility state.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Jehan",
                                         "Jehan",
                                         "2021");
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_item ("item",
                                                     "item",
                                                     "The item",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_procedure_add_return_value (procedure,
                                   g_param_spec_boolean ("lock-visibility",
                                                         "lock visibility",
                                                         "Whether the item's visibility is locked",
                                                         FALSE,
                                                         LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-set-lock-visibility
   */
  procedure = ligma_procedure_new (item_set_lock_visibility_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-set-lock-visibility");
  ligma_procedure_set_static_help (procedure,
                                  "Set the 'lock visibility' state of the specified item.",
                                  "This procedure sets the specified item's lock visibility state.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Jehan",
                                         "Jehan",
                                         "2021");
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_item ("item",
                                                     "item",
                                                     "The item",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_procedure_add_argument (procedure,
                               g_param_spec_boolean ("lock-visibility",
                                                     "lock visibility",
                                                     "The new item 'lock visibility' state",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-get-color-tag
   */
  procedure = ligma_procedure_new (item_get_color_tag_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-get-color-tag");
  ligma_procedure_set_static_help (procedure,
                                  "Get the color tag of the specified item.",
                                  "This procedure returns the specified item's color tag.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Michael Natterer <mitch@ligma.org>",
                                         "Michael Natterer",
                                         "2016");
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_item ("item",
                                                     "item",
                                                     "The item",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_procedure_add_return_value (procedure,
                                   g_param_spec_enum ("color-tag",
                                                      "color tag",
                                                      "The item's color tag",
                                                      LIGMA_TYPE_COLOR_TAG,
                                                      LIGMA_COLOR_TAG_NONE,
                                                      LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-set-color-tag
   */
  procedure = ligma_procedure_new (item_set_color_tag_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-set-color-tag");
  ligma_procedure_set_static_help (procedure,
                                  "Set the color tag of the specified item.",
                                  "This procedure sets the specified item's color tag.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Michael Natterer <mitch@ligma.org>",
                                         "Michael Natterer",
                                         "2016");
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_item ("item",
                                                     "item",
                                                     "The item",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_procedure_add_argument (procedure,
                               g_param_spec_enum ("color-tag",
                                                  "color tag",
                                                  "The new item color tag",
                                                  LIGMA_TYPE_COLOR_TAG,
                                                  LIGMA_COLOR_TAG_NONE,
                                                  LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-get-tattoo
   */
  procedure = ligma_procedure_new (item_get_tattoo_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-get-tattoo");
  ligma_procedure_set_static_help (procedure,
                                  "Get the tattoo of the specified item.",
                                  "This procedure returns the specified item's tattoo. A tattoo is a unique and permanent identifier attached to a item that can be used to uniquely identify a item within an image even between sessions.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Jay Cox",
                                         "Jay Cox",
                                         "1998");
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_item ("item",
                                                     "item",
                                                     "The item",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_procedure_add_return_value (procedure,
                                   g_param_spec_uint ("tattoo",
                                                      "tattoo",
                                                      "The item tattoo",
                                                      1, G_MAXUINT32, 1,
                                                      LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-set-tattoo
   */
  procedure = ligma_procedure_new (item_set_tattoo_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-set-tattoo");
  ligma_procedure_set_static_help (procedure,
                                  "Set the tattoo of the specified item.",
                                  "This procedure sets the specified item's tattoo. A tattoo is a unique and permanent identifier attached to a item that can be used to uniquely identify a item within an image even between sessions.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Jay Cox",
                                         "Jay Cox",
                                         "1998");
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_item ("item",
                                                     "item",
                                                     "The item",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_procedure_add_argument (procedure,
                               g_param_spec_uint ("tattoo",
                                                  "tattoo",
                                                  "The new item tattoo",
                                                  1, G_MAXUINT32, 1,
                                                  LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-attach-parasite
   */
  procedure = ligma_procedure_new (item_attach_parasite_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-attach-parasite");
  ligma_procedure_set_static_help (procedure,
                                  "Add a parasite to an item.",
                                  "This procedure attaches a parasite to an item. It has no return values.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Jay Cox",
                                         "Jay Cox",
                                         "1998");
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_item ("item",
                                                     "item",
                                                     "The item",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_parasite ("parasite",
                                                         "parasite",
                                                         "The parasite to attach to the item",
                                                         LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-detach-parasite
   */
  procedure = ligma_procedure_new (item_detach_parasite_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-detach-parasite");
  ligma_procedure_set_static_help (procedure,
                                  "Removes a parasite from an item.",
                                  "This procedure detaches a parasite from an item. It has no return values.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Jay Cox",
                                         "Jay Cox",
                                         "1998");
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_item ("item",
                                                     "item",
                                                     "The item",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_string ("name",
                                                       "name",
                                                       "The name of the parasite to detach from the item.",
                                                       FALSE, FALSE, FALSE,
                                                       NULL,
                                                       LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-get-parasite
   */
  procedure = ligma_procedure_new (item_get_parasite_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-get-parasite");
  ligma_procedure_set_static_help (procedure,
                                  "Look up a parasite in an item",
                                  "Finds and returns the parasite that is attached to an item.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Jay Cox",
                                         "Jay Cox",
                                         "1998");
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_item ("item",
                                                     "item",
                                                     "The item",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_string ("name",
                                                       "name",
                                                       "The name of the parasite to find",
                                                       FALSE, FALSE, FALSE,
                                                       NULL,
                                                       LIGMA_PARAM_READWRITE));
  ligma_procedure_add_return_value (procedure,
                                   ligma_param_spec_parasite ("parasite",
                                                             "parasite",
                                                             "The found parasite",
                                                             LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);

  /*
   * ligma-item-get-parasite-list
   */
  procedure = ligma_procedure_new (item_get_parasite_list_invoker);
  ligma_object_set_static_name (LIGMA_OBJECT (procedure),
                               "ligma-item-get-parasite-list");
  ligma_procedure_set_static_help (procedure,
                                  "List all parasites.",
                                  "Returns a list of all parasites currently attached the an item.",
                                  NULL);
  ligma_procedure_set_static_attribution (procedure,
                                         "Marc Lehmann",
                                         "Marc Lehmann",
                                         "1999");
  ligma_procedure_add_argument (procedure,
                               ligma_param_spec_item ("item",
                                                     "item",
                                                     "The item",
                                                     FALSE,
                                                     LIGMA_PARAM_READWRITE));
  ligma_procedure_add_return_value (procedure,
                                   g_param_spec_boxed ("parasites",
                                                       "parasites",
                                                       "The names of currently attached parasites",
                                                       G_TYPE_STRV,
                                                       LIGMA_PARAM_READWRITE));
  ligma_pdb_register_procedure (pdb, procedure);
  g_object_unref (procedure);
}
